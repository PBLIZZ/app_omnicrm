#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

set -e

# Double-check on push as well
if git grep -n -E 'drizzle-kit\s+push' -- \
  ':!*.md' \
  ':!*.sql' \
  ':!**/__tests__/**' \
  ':!pnpm-lock.yaml' \
  ':!yarn.lock' \
  > /dev/null
then
  echo "\nâœ– Push blocked: Found forbidden 'drizzle-kit push' references." >&2
  git grep -n -E 'drizzle-kit\s+push' -- ':!*.md' ':!*.sql' ':!**/__tests__/**' ':!pnpm-lock.yaml' ':!yarn.lock' | sed 's/^/  /' >&2
  exit 1
fi

exit 0

#\!/usr/bin/env sh
pnpm typecheck && pnpm lint && pnpm test
SH < /dev/null